{"version":3,"file":"rh-pagination.js","sources":["rh-pagination.js"],"sourcesContent":["/*\n * Copyright 2018 Red Hat, Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport RHElement from \"../rhelement/rhelement.js\";\n\nclass RhPagination extends RHElement {\n  get html() {\n    return `\n<style>\n:host {\n  display: block; }\n\n:host([hidden]) {\n  display: none; }\n\n:focus:not(:focus-visible) {\n  outline: none; }\n\nnav *, nav *::before, nav *::after {\n  box-sizing: border-box; }\n\nnav ul {\n  margin: 0;\n  padding: 0;\n  list-style: none;\n  display: flex;\n  align-items: baseline; }\n  nav ul li {\n    margin: 1px;\n    display: flex; }\n    nav ul li > a {\n      display: block;\n      padding: 0 calc(var(--rh-theme--font-size, 16px) * 0.75);\n      line-height: calc(var(--rh-theme--font-size, 16px) * 2.5);\n      min-height: calc(var(--rh-theme--font-size, 16px) * 2.5);\n      min-width: calc(var(--rh-theme--font-size, 16px) * 2.5);\n      border: var(--rh-theme--ui--border-width, 1px) var(--rh-theme--ui--border-style, solid) transparent;\n      background: var(--rh-theme--color--ui-subtle, #f3f3f3);\n      color: var(--rh-theme--color--ui-subtle--text, #333);\n      text-align: center;\n      text-decoration: none;\n      vertical-align: middle; }\n      nav ul li > a:hover, nav ul li > a:focus, nav ul li > a:active {\n        background: var(--rh-theme--color--ui-base, #0477a4);\n        color: var(--rh-theme--color--ui-base--text, #fff); }\n      nav ul li > a[aria-current] {\n        background: var(--rh-theme--color--ui-complement, #464646);\n        color: var(--rh-theme--color--ui-complement--text, #fff); }\n    nav ul li#next {\n      order: 10; }\n\n#jump {\n  margin: 0 var(--rh-theme--container-spacer, 1rem); }\n  #jump a {\n    color: var(--rh-theme--color--ui-link, #06c);\n    text-decoration: none; }\n    #jump a:hover {\n      color: var(--rh-theme--color--ui-link--hover, #003366);\n      text-decoration: underline; }\n    #jump a:focus {\n      color: var(--rh-theme--color--ui-link--focus, #003366);\n      text-decoration: underline; }\n\n#currentPageInput {\n  margin-right: calc(var(--rh-theme--content-spacer, 1rem) * 0.5);\n  padding: 0 calc(var(--rh-theme--font-size, 16px) * 0.75);\n  line-height: calc(var(--rh-theme--font-size, 16px) * 2.5);\n  min-height: calc(var(--rh-theme--font-size, 16px) * 2.5);\n  border: var(--rh-theme--ui--border-width, 1px) var(--rh-theme--ui--border-style, solid) var(--rh-theme--color--surface--border, #dfdfdf);\n  box-shadow: var(--rh-theme--box-shadow--input, inset 0 1px 1px 0 rgba(19, 19, 19, 0.1));\n  width: 4em;\n  font-size: inherit; }\n\n:host([show-pages]) #jump {\n  order: -1;\n  margin-left: 0; }\n\n:host([show-pages]) #next {\n  order: initial; }\n</style>\n<nav>\n  <ul id=\"list\">\n    <li id=\"jump\" hidden>\n      <form>\n        <input type=\"number\" name=\"\" id=\"currentPageInput\"> of <a href=\"#\" id=\"total-pages\"></a>\n      </form>\n    </li>\n  </ul>\n</nav>`;\n  }\n\n  static get tag() {\n    return \"rh-pagination\";\n  }\n\n  get templateUrl() {\n    return \"rh-pagination.html\";\n  }\n\n  get styleUrl() {\n    return \"rh-pagination.scss\";\n  }\n\n  get currentPage() {\n    return this.getAttribute(\"current-page\");\n  }\n\n  set currentPage(val) {\n    console.log(this);\n    this.setAttribute(\"current-page\", val);\n  }\n\n  static get observedAttributes() {\n    return [\"total-pages\", \"show-jump\", \"show-pages\"];\n  }\n\n  constructor() {\n    super(RhPagination.tag);\n\n    this.jump = this.shadowRoot.querySelector(\"#jump\");\n    this.currentPageInput = this.shadowRoot.querySelector(\"#currentPageInput\");\n    this.list = this.shadowRoot.querySelector(\"#list\");\n\n    this._submitHandler = this._submitHandler.bind(this);\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    this._copyNav();\n\n    this.currentPageInput.value = this.currentPage;\n    this.jump.addEventListener(\"submit\", this._submitHandler);\n  }\n\n  disconnectedCallback() {\n    this.jump.removeEventListener(\"submit\", this._submitHandler);\n  }\n\n  attributeChangedCallback(attr, oldValue, newValue) {\n    if (attr === \"total-pages\" && this.hasAttribute(\"show-jump\")) {\n      this.shadowRoot.querySelector(\"#total-pages\").textContent = newValue;\n    }\n\n    if (attr === \"show-jump\") {\n      this.jump.hidden = false;\n    }\n  }\n\n  _copyNav() {\n    const previous = this.querySelector('a[control=\"previous\"]');\n    const next = this.querySelector('a[control=\"next\"]');\n    const liPrevious = document.createElement(\"li\");\n    const liNext = document.createElement(\"li\");\n    const liJump = this.shadowRoot.querySelector(\"#jump\");\n\n    liPrevious.setAttribute(\"id\", \"previous\");\n    liNext.setAttribute(\"id\", \"next\");\n    liPrevious.innerHTML = previous.outerHTML;\n    liNext.innerHTML = next.outerHTML;\n    this.list.insertBefore(liPrevious, liJump);\n    this.list.insertBefore(liNext, liJump);\n    // this.list.appendChild(liPrevious);\n    // this.list.appendChild(liNext);\n\n    if (this.hasAttribute(\"show-pages\")) {\n      this._buildPageNumbers();\n    }\n  }\n\n  _buildPageNumbers() {\n    const liNext = this.shadowRoot.querySelector(\"#next\");\n    const totalPages = this.getAttribute(\"total-pages\");\n    const currentPage = this.currentPage;\n\n    for (let pageNum = 1; pageNum <= totalPages; pageNum++) {\n      const liPageNum = document.createElement(\"li\");\n      const aPageNum = document.createElement(\"a\");\n\n      aPageNum.setAttribute(\"href\", \"#\");\n      aPageNum.textContent = pageNum;\n      liPageNum.innerHTML = aPageNum.outerHTML;\n      this.list.insertBefore(liPageNum, liNext);\n    }\n\n    this.list.children[currentPage]\n      .querySelector(\"a\")\n      .setAttribute(\"aria-current\", \"page\");\n  }\n\n  _submitHandler(event) {\n    event.preventDefault();\n    this.currentPage = this.currentPageInput.value;\n  }\n}\n\nRHElement.create(RhPagination);\n\nexport default RhPagination;\n"],"names":[],"mappings":"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"}